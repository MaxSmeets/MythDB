<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <!-- TITLE COMES FROM CHILD TEMPLATE -->
    <title>{% block title %}MythDB (default title){% endblock %}</title>

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" />

    <!-- GLOBAL CSS: loaded on every page -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/main.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/layout.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/markdown.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/markdown-editor.css') }}"
    />

    <!-- OPTIONAL PER-PAGE EXTRA HEAD CONTENT -->
    {% block head %}
    <!-- e.g. page-specific CSS goes here -->
    {% endblock %}
  </head>
  <body>
    <div class="app-layout">
      <header class="topbar">
        <div class="brand">
          <a href="{{ url_for('pages.index') }}"
            ><img
              src="{{ url_for('static', filename='mythdb.png') }}"
              style="height: 40px"
              alt="MythDB Logo"
          /></a>
        </div>

        <button id="searchBtn" class="search-button" title="Search (Alt+K)">
          <span class="search-icon">üîç</span>
          <span class="search-keybind">Alt+K</span>
        </button>

        <nav class="nav">
          <a
            href="{{ url_for('pages.admin_dashboard') }}"
            class="{% if active_page == 'admin' %}active{% endif %}"
          >
            Admin
          </a>
          <a
            href="{{ url_for('projects.projects_overview') }}"
            class="{% if active_page == 'projects' %}active{% endif %}"
          >
            Projects
          </a>
        </nav>
      </header>

      {% block subheader %}{% endblock %}

      <main class="main-content">{% block content %}{% endblock %}</main>
    </div>

    <!-- Search Modal -->
    <div id="searchModal" class="modal hidden">
      <div class="modal-overlay"></div>
      <div class="modal-content modal-search">
        <div class="search-header">
          <input
            type="text"
            id="searchInput"
            class="search-input"
            placeholder="Search articles, projects..."
            autocomplete="off"
            spellcheck="false"
          />
          <button
            type="button"
            id="closeSearchModal"
            class="btn-close"
            aria-label="Close"
          >
            ‚úï
          </button>
        </div>
        <div id="searchResults" class="search-results">
          <div class="search-empty">Type to search...</div>
        </div>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/base.js') }}"></script>
    <script src="{{ url_for('static', filename='js/search.js') }}"></script>

    {% block scripts %}{% endblock %}
  </body>
</html>
